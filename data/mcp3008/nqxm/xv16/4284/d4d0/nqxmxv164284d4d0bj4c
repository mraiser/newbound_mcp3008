{"data":{"timer":[{"name":"addavailablecontrols","id":"qyppjk1687152f990u87"}],"css":".dialgoeshere{\n  width:140px;\n  height:140px;\n  display:inline-block;\n}","data":[],"name":"mcp3008","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nif (ME.DATA.peer){\n  if (ME.DATA.peer != 'local') me.peer = ME.DATA.peer;\n}\nelse me.peer = typeof CURRENTDEVICEID == 'undefined' ? null : CURRENTDEVICEID;\n\nme.pin = ME.DATA.pin ? ME.DATA.pin : 0;\nme.title = ME.DATA.title ? ME.DATA.title : \"MCP3008\";\n\nME.DATA.pin = me.pin;\nME.DATA.title = me.title;\n\nfunction periodic(){\n  if (document.getElementById(me.UUID) == ME){\n    send_read(me.pin, function(result){\n      me.value = result.data.toFixed(1);\n      me.dial.update(me.value);\n      setTimeout(periodic, 3000);\n    }, me.peer);\n  }\n}\n\nme.ready = function(){\n  var d = {\n    value: me.data,\n    units: \"%\",\n    title: me.title,\n    range: [-30,130]\n  };\n  var el = $('<div class=\"mcp3008 iconmode\"/>');\n  $(ME).find('.dialgoeshere').html(el);\n  el.data(\"data\", d);\n  installControl(el[0], \"metabot\", \"dial\", function(api){\n    me.dial = api;\n    periodic();\n  }, d);\n};\n\n","groups":"anonymous","ctl":"nqxmxv164284d4d0bj4c","html":"<div class='dialgoeshere'><img src='../botmanager/asset/mcp3008/loading.gif'><\/div>","cmd":[{"python":"knomjn164284d939ag54","java":"xnkzqi164284d83ccs51","name":"read","id":"htrgmr164284d83e7t52","lang":"python"},{"java":"krjgqz16871516addz5b","name":"addavailablecontrols","id":"sqsmov16871516af8k5c"}],"three":{"controls":[],"assets":[],"behaviors":[],"animations":[],"poses":[]},"db":"mcp3008","desc":""},"readers":["anonymous"],"id":"nqxmxv164284d4d0bj4c","sessionid":"jvgvwg16b7a4d277bt3","time":1639329775349,"addr":"/0:0:0:0:0:0:0:1:42914","username":"admin"}