{"data":{"python":"# Adapted from code written by Limor \"Ladyada\" Fried for Adafruit Industries, (c) 2015\n# https://learn.adafruit.com/reading-a-analog-in-and-controlling-audio-volume-with-the-raspberry-pi/script\n\n# read SPI data from MCP3008 chip, 8 possible adc's (0 thru 7)\ndef readadc(adcnum, clockpin, mosipin, misopin, cspin):\n        if ((adcnum > 7) or (adcnum < 0)):\n                return -1\n        GPIO.output(cspin, True)\n \n        GPIO.output(clockpin, False)  # start clock low\n        GPIO.output(cspin, False)     # bring CS low\n \n        commandout = adcnum\n        commandout |= 0x18  # start bit + single-ended bit\n        commandout <<= 3    # we only need to send 5 bits here\n        for i in range(5):\n                if (commandout & 0x80):\n                        GPIO.output(mosipin, True)\n                else:\n                        GPIO.output(mosipin, False)\n                commandout <<= 1\n                GPIO.output(clockpin, True)\n                GPIO.output(clockpin, False)\n \n        adcout = 0\n        # read in one empty bit, one null bit and 10 ADC bits\n        for i in range(12):\n                GPIO.output(clockpin, True)\n                GPIO.output(clockpin, False)\n                adcout <<= 1\n                if (GPIO.input(misopin)):\n                        adcout |= 0x1\n \n        GPIO.output(cspin, True)\n        \n        adcout >>= 1       # first bit is 'null' so drop it\n        return adcout\n      \n# xpins connected from the SPI port on the ADC to the Pi\nSPICLK = 18\nSPIMISO = 23\nSPIMOSI = 24\nSPICS = 25\n \n# set up the SPI interface pins\nGPIO.setup(SPIMOSI, GPIO.OUT)\nGPIO.setup(SPIMISO, GPIO.IN)\nGPIO.setup(SPICLK, GPIO.OUT)\nGPIO.setup(SPICS, GPIO.OUT)\n \n# read the analog pin\nval = readadc(int(pin), SPICLK, SPIMOSI, SPIMISO, SPICS) / 10.24\nreturn val","import":"import sys\nimport time\nimport os\nimport json\nimport RPi.GPIO as GPIO\n \nGPIO.setmode(GPIO.BCM)\nDEBUG = 1\n","returntype":"JSONObject","type":"python","params":[{"name":"pin","type":"String"}],"desc":""},"id":"knomjn164284d939ag54","sessionid":"jvgvwg16b7a4d277bt3","time":1639329757298,"addr":"/0:0:0:0:0:0:0:1:42914","username":"admin"}